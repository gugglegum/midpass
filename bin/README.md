Инструкция по самостоятельной подготовке bin-папки
==================================================

Данный скрипт распространяется в виде архива как standalone-приложение, которое полностью самодостаточно и не требует
ничего дополнительно устанавливать. Скрипт написан на PHP и дистрибутив уже содержит в себе bin папку, в которой лежит
интерпретатор php.exe и все необходимые для скрипта расширения и библиотеки.

Однако, в целях безопасности вы можете захотеть самостоятельно подготовить эту папку, и эта инструкция описывает как
это сделать.

Для Windows
-----------
Сюда нужно положить бинарники из дистрибутива PHP 8.3 или новее (я использовал 8.3.6). Скачиваете соответствующий архив
с https://windows.php.net/download, выбираете версию "VS16 x64 Non Thread Safe", Zip архив (например
`php-8.3.6-nts-Win32-vs16-x64.zip`), распаковываете его и копируете из него в эту папку следующие файлы:

 * `libcrypto-3-x64.dll`
 * `libssl-3-x64.dll`
 * `php_gd.dll`
 * `php.exe`
 * `php-win.exe`
 * `php_mbstring.dll`
 * `php_openssl.dll`
 * `php8.dll`


Для Linux
---------
В Linux PHP распространяется в исходниках, поэтому придётся его скомпилировать. Скачиваете с
[https://www.php.net/downloads.php](https://www.php.net/downloads.php) файл с исходниками, например, `php-8.3.6.tar.gz`
и распаковываете этот архив в любую директорию.

Традиционно установка приложения из исходников в Linux выполняется последовательностью команд `./configure`, `make` и
`make install`. Но поскольку нам не нужно устанавливать PHP в систему, нам нужны только первые две команды. Причём, для
`./configure` нужно добавить несколько дополнительных ключей, чтобы сразу включить в интерпретатор требуемые
расширения: gd, mbstring, openssl, и не включать ненужные (sqlite3).

Если вы обычный пользователь какого-нибудь Ubuntu-подобного дистрибутива Linux, который устанавливает сразу бинарные
пакеты, то у вас скорее всего не установлен компилятор C и C++. Поэтому для начала вам нужно его установить:

```
sudo apt install libc6-dev
```

Кроме этого, для сборки проекта вам потребуется установить dev-пакеты библиотек:

```
sudo apt install libxml2-dev
sudo apt install libonig-dev
sudo apt install libssl-dev
sudo apt install zlib1g-dev
sudo apt install libpng-dev
sudo apt install libjpeg-dev
sudo apt install libcurl4-gnutls-dev
```

Переходите в консоли в каталог, куда вы распаковали архив с исходниками и выполняете:

```
./configure --enable-mbstring --with-openssl --enable-gd --with-curl --with-jpeg --without-pdo-sqlite --without-sqlite3
make
```

Если всё прошло без ошибок, то в папке `sapi/cli` появился файл `php` -- копируете его в bin папку.

В файле php.ini удалите или закомментируйте строчки `extension=`, т.к. нужные расширения уже включены в php-бинарник и
их наличие будет вызывать ошибки при запуске.
